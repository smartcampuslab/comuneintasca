<ion-header-bar ng-if="obj.sonscount>0" class="button bar-subheader icon-right" ng-click="toggleSons()" ng-class="{'ion-chevron-down': !sonsVisible, 'ion-chevron-up': sonsVisible}">
  {{ 'complex_events_found' | translate_plur:obj.sonscount }} "{{obj.title|translate}}"
</ion-header-bar>
<ion-header-bar ng-if="siblingscount>0" class="button bar-subheader icon-right" ng-click="toggleSiblings()" ng-class="{'ion-chevron-down': !sonsVisible, 'ion-chevron-up': sonsVisible}">
  {{ 'complex_events_found' | translate_plur:siblingscount }} "{{obj.parent.title|translate}}"
</ion-header-bar>
<div class="event_container" ng-if="!sonsVisible">
  <ion-content class="has-header">
    <comuni-img class="content-image-main" gotdata="gotdata" detail="true"></comuni-img>
    
    <div class="padding event">
      <h1>{{obj.title | translate}}</h1>
      <h4>{{obj.dbClassification | translate}}</h4>

      <div class="list card sinottico">
        <div ng-if="!!(obj.address | translate) && (obj.address | translate) != 'false'" class="item item-text-wrap item-icon-left"><i class="icon ion-ios7-location-outline"></i>{{obj.address | translate}}</div>
        <div ng-if="!!(obj.eventPeriod | translate) && (obj.eventPeriod | translate) != 'false'" class="item item-text-wrap item-icon-left"><i class="icon ion-ios7-calendar-outline"></i>{{obj.eventPeriod | translate}}</div>
        <div ng-if="!!(obj.eventTiming | translate) && (obj.eventTiming | translate) != 'false'" class="item item-text-wrap item-icon-left"><i class="icon ion-ios7-time-outline"></i>{{obj.eventTiming | translate}}</div>
        <div ng-if="!!(obj.cost | translate) && (obj.cost | translate) != 'false'" class="item item-text-wrap item-icon-left"><i class="icon ion-ios7-photos-outline"></i>{{obj.cost | translate}}</div>
        <div ng-if="obj.topics.length > 0" class="item item-text-wrap item-icon-left"><i class="icon ion-ios7-bookmarks-outline "></i><span ng-repeat="topic in obj.topics" ng-if="!!topic">{{topic}}<span ng-if="!$last">, </span></span></div>
      </div>
      <!-- <h5><i class="icon ion-ios7-calendar-outline"></i>{{obj.fromTime | date:'dd/MM/yyyy'}}<span ng-if="obj.fromTime !== obj.toTime"> - {{obj.toTime | date:'dd/MM/yyyy'}}</span></h5>-->
    </div>
    <div class="padding event">
      <div class="htmldesc" compile="obj.description | translate"></div>
      <div class="htmldesc" compile="obj.info | translate"></div>
    </div>
  </ion-content>
</div>
<div ng-if="sonsVisible">
  <ion-content class="has-subheader">
    <ion-list ng-if="gotsonsdata">
      <ion-item collection-repeat="son in sons|extOrderBy:{ordering:'DateFrom'} track by son.id" 
                collection-item-width="'100%'" collection-item-height="getListItemHeight(son, $index)"
                href="{{son.abslink}}" class="coll-item item-thumbnail-left">
        <comuni-img class="item-image comuni-item-image" gotdata="gotsonsdata"></comuni-img>
        <h2>{{son.title | translate}}</h2>
        <p ng-if="son.fromTime">{{son.fromTime | date:'dd/MM/yyyy'}}<span ng-if="son.fromTime !== son.toTime"> - {{son.toTime | date:'dd/MM/yyyy'}}</span></p>
        <div class="row comuni-item-bottom">
          <div class="col comuni-item-bottom-text">
            <span>{{son.address | translate}}</span>
          </div>
        </div>
      </ion-item>
    </ion-list>
  </ion-content>
</div>
<ion-footer-bar>
  <div ng-include="'templates/toolbox.html'"></div>
</ion-footer-bar>
